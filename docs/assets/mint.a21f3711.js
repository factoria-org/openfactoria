import{S as se,i as ae,s as oe,e as f,t as I,a as T,d as c,f as B,g as l,h as U,l as N,k as V,C as le,j as G,D as re,o as ce,B as ne,p as ie,z as O,q as Q,x as ue,c as fe,m as me,n as _e,u as Y,y as ve}from"./index.ab445ea7.js";import{h as Z,M as de}from"./MintTable.ac7df024.js";import{w as pe}from"./settings.f5ab2b6d.js";function $(i,e,t){const n=i.slice();return n[33]=e[t],n}function x(i){let e,t,n,a,o,s,u,r,d,M,C,g,H,y;return{c(){e=f("div"),t=f("h2"),n=I(i[9]),a=I(" ("),o=I(i[10]),s=I(")"),u=T(),r=f("a"),d=f("i"),M=T(),C=I(i[3]),H=T(),y=f("div"),y.textContent="Mint your NFT from an invite list below.",c(t,"class","svelte-26u7mg"),c(d,"class","fa-solid fa-link"),c(r,"target","_blank"),c(r,"href",g="/contract/#"+i[3]),c(r,"class","svelte-26u7mg"),c(y,"class","annotation svelte-26u7mg"),c(e,"class","ns svelte-26u7mg")},m(_,b){B(_,e,b),l(e,t),l(t,n),l(t,a),l(t,o),l(t,s),l(e,u),l(e,r),l(r,d),l(r,M),l(r,C),l(e,H),l(e,y)},p(_,b){b[0]&512&&U(n,_[9]),b[0]&1024&&U(o,_[10]),b[0]&8&&U(C,_[3]),b[0]&8&&g!==(g="/contract/#"+_[3])&&c(r,"href",g)},d(_){_&&N(e)}}}function he(i){let e;return{c(){e=f("div"),e.innerHTML="you are not on any invite list<br/>for this vending machine",c(e,"class","empty svelte-26u7mg")},m(t,n){B(t,e,n)},p:O,i:O,o:O,d(t){t&&N(e)}}}function ge(i){let e,t,n,a=i[0],o=[];for(let s=0;s<a.length;s+=1)o[s]=ee($(i,a,s));return{c(){e=f("table"),t=f("tr"),t.innerHTML=`<th class="svelte-26u7mg">name</th> 
          <th class="svelte-26u7mg">price</th> 
          <th class="invite-limit svelte-26u7mg">limit</th> 
          <th class="invite-mint svelte-26u7mg">mint</th>`,n=T();for(let s=0;s<o.length;s+=1)o[s].c();c(e,"class","svelte-26u7mg")},m(s,u){B(s,e,u),l(e,t),l(e,n);for(let r=0;r<o.length;r+=1)o[r].m(e,null)},p(s,u){if(u[0]&8193){a=s[0];let r;for(r=0;r<a.length;r+=1){const d=$(s,a,r);o[r]?o[r].p(d,u):(o[r]=ee(d),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=a.length}},i:O,o:O,d(s){s&&N(e),ue(o,s)}}}function be(i){let e;return{c(){e=f("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>loading invites...',c(e,"class","loading svelte-26u7mg")},m(t,n){B(t,e,n)},p:O,i:O,o:O,d(t){t&&N(e)}}}function ke(i){let e,t,n,a,o,s,u=(i[4].name?i[4].name:i[4].key)+"",r,d,M,C,g,H,y,_,b,F,L,S,R,v,p,D,W,m,E,j;function J(k,z){return k[6]?we:ye}let A=J(i),q=A(i),w=i[8]&&te(i);return{c(){e=f("div"),t=f("div"),n=f("div"),a=f("div"),a.textContent="invite",o=T(),s=f("div"),r=I(u),d=T(),M=f("div"),C=T(),g=f("button"),g.innerHTML='<i class="fa-solid fa-circle-xmark"></i>',H=T(),y=f("h2"),_=I(i[11]),b=I(" ETH"),F=T(),L=f("div"),S=f("div"),S.textContent="count",R=T(),v=f("div"),p=f("input"),D=T(),q.c(),W=T(),w&&w.c(),c(a,"class","faded svelte-26u7mg"),c(n,"class","invitename svelte-26u7mg"),c(M,"class","flexible svelte-26u7mg"),c(g,"class","svelte-26u7mg"),c(t,"class","header svelte-26u7mg"),c(y,"class","svelte-26u7mg"),c(S,"class","name svelte-26u7mg"),c(p,"type","number"),c(p,"placeholder","mint count"),c(p,"class","svelte-26u7mg"),c(v,"class","value svelte-26u7mg"),c(L,"class","selector svelte-26u7mg"),c(e,"class","showauth info svelte-26u7mg")},m(k,z){B(k,e,z),l(e,t),l(t,n),l(n,a),l(n,o),l(n,s),l(s,r),l(t,d),l(t,M),l(t,C),l(t,g),l(e,H),l(e,y),l(y,_),l(y,b),l(e,F),l(e,L),l(L,S),l(L,R),l(L,v),l(v,p),Y(p,i[1]),l(e,D),q.m(e,null),l(e,W),w&&w.m(e,null),m=!0,E||(j=[Q(g,"click",i[16]),Q(p,"input",i[17]),Q(p,"input",i[18])],E=!0)},p(k,z){(!m||z[0]&16)&&u!==(u=(k[4].name?k[4].name:k[4].key)+"")&&U(r,u),(!m||z[0]&2048)&&U(_,k[11]),z[0]&2&&ie(p.value)!==k[1]&&Y(p,k[1]),A===(A=J(k))&&q?q.p(k,z):(q.d(1),q=A(k),q&&(q.c(),q.m(e,W))),k[8]?w?(w.p(k,z),z[0]&256&&G(w,1)):(w=te(k),w.c(),G(w,1),w.m(e,null)):w&&(ne(),V(w,1,1,()=>{w=null}),le())},i(k){m||(G(w),m=!0)},o(k){V(w),m=!1},d(k){k&&N(e),q.d(),w&&w.d(),E=!1,ve(j)}}}function ee(i){let e,t,n=(i[33].name?i[33].name:i[33].key)+"",a,o,s,u=i[33].price+"",r,d,M,C,g=i[33].limit+"",H,y,_,b,F,L,S;function R(){return i[20](i[33])}return{c(){e=f("tr"),t=f("td"),a=I(n),o=T(),s=f("td"),r=I(u),d=I(" ETH"),M=T(),C=f("td"),H=I(g),y=T(),_=f("td"),b=f("button"),b.textContent="mint",F=T(),c(t,"class","svelte-26u7mg"),c(s,"class","svelte-26u7mg"),c(C,"class","invite-limit svelte-26u7mg"),c(b,"class","display svelte-26u7mg"),c(_,"class","invite-mint svelte-26u7mg")},m(v,p){B(v,e,p),l(e,t),l(t,a),l(e,o),l(e,s),l(s,r),l(s,d),l(e,M),l(e,C),l(C,H),l(e,y),l(e,_),l(_,b),l(e,F),L||(S=Q(b,"click",R),L=!0)},p(v,p){i=v,p[0]&1&&n!==(n=(i[33].name?i[33].name:i[33].key)+"")&&U(a,n),p[0]&1&&u!==(u=i[33].price+"")&&U(r,u),p[0]&1&&g!==(g=i[33].limit+"")&&U(H,g)},d(v){v&&N(e),L=!1,S()}}}function ye(i){let e,t,n;return{c(){e=f("button"),e.textContent="mint",c(e,"id","mint-button"),c(e,"class","display svelte-26u7mg")},m(a,o){B(a,e,o),t||(n=Q(e,"click",i[19]),t=!0)},p:O,d(a){a&&N(e),t=!1,n()}}}function we(i){let e;return{c(){e=f("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>minting NFTs...',c(e,"class","loading svelte-26u7mg")},m(t,n){B(t,e,n)},p:O,d(t){t&&N(e)}}}function te(i){let e,t;return e=new de({props:{tx:i[8],web3:i[12],contract:i[3]}}),{c(){fe(e.$$.fragment)},m(n,a){me(e,n,a),t=!0},p(n,a){const o={};a[0]&256&&(o.tx=n[8]),a[0]&4096&&(o.web3=n[12]),a[0]&8&&(o.contract=n[3]),e.$set(o)},i(n){t||(G(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){_e(e,n)}}}function Te(i){let e,t,n,a,o,s,u,r,d,M,C,g,H,y,_,b,F,L,S,R,v=i[9]&&x(i);const p=[ke,be,ge,he],D=[];function W(m,E){return m[5]?0:m[7]?1:m[0]&&m[0].length>0?2:3}return s=W(i),u=D[s]=p[s](i),{c(){e=f("div"),t=I(i[2]),n=T(),a=f("div"),v&&v.c(),o=T(),u.c(),r=T(),d=f("footer"),M=f("i"),C=I(" Experiencing slow load time?"),g=f("br"),H=f("br"),y=I("anyone can "),_=f("a"),b=I("instantly deploy this vending machine and mint!"),L=T(),S=f("nav"),S.innerHTML=`<div>powered by</div> 
  <h1 class="svelte-26u7mg"><a href="/" class="svelte-26u7mg">factoria</a></h1>`,c(e,"class","error"),c(M,"class","fa-solid fa-circle-info"),c(_,"target","_blank"),c(_,"href",F="https://skinnerbox.factoria.app/#"+i[3]),c(_,"class","svelte-26u7mg"),c(d,"class","svelte-26u7mg"),c(S,"class","svelte-26u7mg"),c(a,"class","container svelte-26u7mg")},m(m,E){B(m,e,E),l(e,t),B(m,n,E),B(m,a,E),v&&v.m(a,null),l(a,o),D[s].m(a,null),l(a,r),l(a,d),l(d,M),l(d,C),l(d,g),l(d,H),l(d,y),l(d,_),l(_,b),l(a,L),l(a,S),R=!0},p(m,E){(!R||E[0]&4)&&U(t,m[2]),m[9]?v?v.p(m,E):(v=x(m),v.c(),v.m(a,o)):v&&(v.d(1),v=null);let j=s;s=W(m),s===j?D[s].p(m,E):(ne(),V(D[j],1,1,()=>{D[j]=null}),le(),u=D[s],u?u.p(m,E):(u=D[s]=p[s](m),u.c()),G(u,1),u.m(a,r)),(!R||E[0]&8&&F!==(F="https://skinnerbox.factoria.app/#"+m[3]))&&c(_,"href",F)},i(m){R||(G(u),R=!0)},o(m){V(u),R=!1},d(m){m&&N(e),m&&N(n),m&&N(a),v&&v.d(),D[s].d()}}}function Me(i,e,t){re();let n={},a=[];const o=new F0;let s=1,u="",r,d,M,C,g,H,y,_,b=0,F,L,S,R,v,p,D;const W={4:"rinkeby.",1:"",5:"goerli."},m={4:"rinkeby",1:"mainnet",5:"goerli"},E=async h=>{t(4,M=h),t(5,C=!0),location.hash="#"+r+":"+M.key,await j()},j=async()=>{let h=M;console.log("*",h),g={key:h.key,proof:o._invites[h.key].proof},b=""+o._invites[h.key].condition.raw.price*s,t(11,S=b/10**18);try{t(2,u="");let K=await o.api.mint(g,s).estimate({value:b});console.log("estimate",K)}catch(K){console.log("error",K.message),t(2,u=Z(K.message))}},J=async()=>{try{t(6,H=!0),t(2,u="");let h=M;g={key:h.key,proof:o._invites[h.key].proof},t(8,_=await o.api.mint(g,s).send({value:b}))}catch(h){t(2,u=Z(h.message))}t(6,H=!1)},A=()=>{location.hash="#"+r,t(5,C=!1)},q=async()=>{t(7,y=!0);try{if(location.hash.length>0){let P=location.hash.slice(1).split(":");t(3,r=P[0]),P.length>1&&(d=P[1])}else{t(2,u="[ERROR] no contract address specified");return}await o.init({web3:p,contract:r});let h=await p.eth.getChainId();R=W[h],v=m[h],t(9,F=await o.api.name().call()),t(10,L=await o.api.symbol().call()),n=await o.myInvites(),n&&n[d]&&await E(n[d]),t(0,a=[]);for(let K in n){let P=n[K].condition,X=new Date(P.converted.start);P.converted.limit>0&&a.push({name:n[K].name,key:K,cid:n[K].cid,limit:`${P.converted.limit}`,price:`${P.converted.eth}`,start:`${X.toDateString()} ${X.toLocaleTimeString()}`,startUnix:P.raw.start})}}catch(h){t(2,u=h.message)}t(7,y=!1)};ce(async()=>{D=new Superprovider({walletconnect:pe});try{let h=await D.current();h||(h=await D.connect()),t(12,p=new Web3(h))}catch(h){t(2,u=h.message)}await q()});function w(){s=ie(this.value),t(1,s)}return[a,s,u,r,M,C,H,y,_,F,L,S,p,E,j,J,A,w,()=>{j()},()=>{J()},h=>{E(h)}]}class Ce extends se{constructor(e){super(),ae(this,e,Me,Te,oe,{},null,[-1,-1])}}new Ce({target:document.getElementById("mint")});
